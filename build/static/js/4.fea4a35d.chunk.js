(this["webpackJsonpchoice-voting-app"]=this["webpackJsonpchoice-voting-app"]||[]).push([[4],{209:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=21364625},243:function(e,t,n){"use strict";(function(e){var a=n(70),s=n.n(a),o=n(73),c=(n(247),n(248)),r=n.n(c),i=(n(249),n(28)),l=n(100),d=n.n(l),u=n(209),m=n(138),p=n.n(m),j=n(210),g=n(111),b=n(146),h=n.n(b),f=n(8);t.a=function(){var t,n=Object(i.b)(),a=(Object(i.c)((function(e){return e.status.addressNum})),new d.a.Algodv2({"X-API-Key":"Xy8NsXxfJg2cQ2YQ4pax6aLrTcj55jZ9mbsNCM30 "},"https://testnet-algorand.api.purestake.io/ps2","")),c=(localStorage.getItem("address"),localStorage.getItem("wallet-type")),l=(null===(t=localStorage.getItem("addresses"))||void 0===t||t.split(","),localStorage.getItem("address")),m=[{candidates:[{address:"DQ2NPLGQ3CV3QAPMS7KHIRUNUF2ZSTYRT5SZGDCPLB7VPC5OSSLCI5H7DM",image:"",name:"Yes"},{address:"6P6D5KQH5VIXEJGW6LXPUMEZ77XNLHQXB6GMW4CBDBN2VJ4CFZ7HCIKUBM",image:"",name:"No"}],choice_per_vote:1,created_at:"2021-12-08T10:32:15.878473",description:"Lorem ipsum",is_finished:!1,is_started:!0,process_image:"https://i.postimg.cc/90XSyrjH/choice.png",slug:"CHOICE-COIN-IS-A-STANDARD-ALGORAND-ASSET-b0c7db",title:"CHOICE COIN IS A STANDARD ALGORAND ASSET",wallet:{address:"NX4T2FTIGNPVPSMEXJFMMKD46O4HRCPN25BDHOUW2SWXANZPQBZEDYKDVE"}}],b=function(){var e=Object(o.a)(s.a.mark((function e(t){var o,c,r,i,m,j,g,b,h,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new p.a,e.prev=1,e.next=4,o.connect({shouldSelectOneAccount:!0});case 4:return c=e.sent,r=l||c[0].address,e.next=8,a.accountInformation(l||c[0].address).do();case 8:if(i=e.sent,m=i.assets?i.assets.find((function(e){return e["asset-id"]===u.a})).amount/100:0,j=!!i.assets&&i.assets.some((function(e){return e["asset-id"]===u.a})),0!==i.assets.length){e.next=15;break}return alert("You need to optin to Choice Coin"),n({type:"close_vote_modal"}),e.abrupt("return");case 15:if(j){e.next=19;break}return alert("You need to optin to Choice Coin"),n({type:"close_vote_modal"}),e.abrupt("return");case 19:if(!(t.amount>m)){e.next=22;break}return alert("You do not have sufficient balance to make this transaction."),e.abrupt("return");case 22:return e.next=24,a.getTransactionParams().do();case 24:return g=e.sent,b=100*t.amount,h=d.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:r,to:t.address,amount:b,assetIndex:u.a,suggestedParams:g}),e.next=29,o.signTransaction(h.toByte());case 29:return f=e.sent,e.next=32,a.sendRawTransaction(f.blob).do();case 32:n({type:"close_vote_modal"}),alert("You have successfully placed your vote for this election"),window.location.reload(),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(1),alert("An error occured the during transaction process"),console.log(e.t0);case 41:case"end":return e.stop()}}),e,null,[[1,37]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(s.a.mark((function e(t){var o,c,r,i,m,p,j,g,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"!==typeof window.AlgoSigner){e.next=5;break}window.open("https://chrome.google.com/webstore/detail/algosigner/kmmolakhbgdlpkjkcjkebenjheonagdm","_blank"),e.next=40;break;case 5:return e.next=7,window.AlgoSigner.connect({ledger:"TestNet"});case 7:return e.next=9,window.AlgoSigner.accounts({ledger:"TestNet"});case 9:return o=e.sent,c=l||o[0].address,e.next=13,a.accountInformation(l||o[0].address).do();case 13:if(r=e.sent,i=r.assets?r.assets.find((function(e){return e["asset-id"]===u.a})).amount/100:0,m=!!r.assets&&r.assets.some((function(e){return e["asset-id"]===u.a})),0!==r.assets.length){e.next=20;break}return alert("You need to optin to Choice Coin"),n({type:"close_vote_modal"}),e.abrupt("return");case 20:if(m){e.next=24;break}return alert("You need to optin to Choice Coin"),n({type:"close_vote_modal"}),e.abrupt("return");case 24:if(!(t.amount>i)){e.next=27;break}return alert("You do not have sufficient balance to make this transaction."),e.abrupt("return");case 27:return e.next=29,a.getTransactionParams().do();case 29:return p=e.sent,j=100*t.amount,g=d.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:c,to:t.address,amount:j,assetIndex:u.a,suggestedParams:p}),e.next=34,window.AlgoSigner.signTxn([{txn:window.AlgoSigner.encoding.msgpackToBase64(g.toByte())}]);case 34:return b=e.sent,e.next=37,a.sendRawTransaction(window.AlgoSigner.encoding.base64ToMsgpack(b[0].blob)).do();case 37:n({type:"close_vote_modal"}),alert("You have successfully placed your vote for this election"),window.location.reload();case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(0),alert("An error occured the during transaction process"),console.log(e.t0);case 46:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(s.a.mark((function t(n){var o,c,r,i,m,p,b,f,x,v,O,w,_;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new g.default({bridge:"https://bridge.walletconnect.org",qrcodeModal:h.a}),t.prev=1,c=l||"",t.next=5,a.accountInformation(c).do();case 5:if(r=t.sent,i=r.assets?r.assets.find((function(e){return e["asset-id"]===u.a})).amount/100:0,m=!!r.assets&&r.assets.some((function(e){return e["asset-id"]===u.a})),0!==r.assets.length){t.next=11;break}return alert("You need to optin to Choice Coin"),t.abrupt("return");case 11:if(m){t.next=14;break}return alert("You need to optin to Choice Coin"),t.abrupt("return");case 14:if(!(n.amount>i)){t.next=17;break}return alert("You do not have sufficient balance to make this transaction."),t.abrupt("return");case 17:return t.next=19,a.getTransactionParams().do();case 19:return p=t.sent,b=100*n.amount,f=d.a.makeAssetTransferTxnWithSuggestedParamsFromObject({from:c,to:n.address,amount:b,assetIndex:u.a,suggestedParams:p}),x=[{txn:e.from(d.a.encodeUnsignedTransaction(f)).toString("base64"),message:"Transaction using Mobile Wallet"}],v=[x],O=Object(j.formatJsonRpcRequest)("algo_signTxn",v),t.next=27,o.sendCustomRequest(O);case 27:return w=t.sent,_=w.map((function(t){return t?new Uint8Array(e.from(t,"base64")):null})),console.log(_),t.next=32,a.sendRawTransaction(_).do();case 32:alert("You have successfully placed your vote for this election"),window.location.reload(),t.next=40;break;case 36:t.prev=36,t.t0=t.catch(1),alert("An error occured the during transaction process"),console.log(t.t0);case 40:case"end":return t.stop()}}),t,null,[[1,36]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"ptt_elt",children:Object(f.jsxs)("div",{className:"ptt_elt_inn",children:[Object(f.jsx)("div",{className:"ptt_hd",children:Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:"CHOICE-COIN VOTING PARTICIPATION"})})}),Object(f.jsx)("ul",{className:"card_list",children:null===m||void 0===m?void 0:m.map((function(e,t){var n;return Object(f.jsxs)("div",{className:"card_cont",children:[Object(f.jsx)("div",{className:"card_r1",children:Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(f.jsx)("div",{className:"card_elt_img",children:e.process_image?Object(f.jsx)("img",{src:e.process_image,alt:""}):Object(f.jsx)("i",{className:"uil uil-asterisk",style:{paddingLeft:"2px",paddingBottom:"2px"}})}),Object(f.jsx)("div",{className:"card_elt_tit",children:e.title})]})}),Object(f.jsx)("div",{className:"card_elt_desc",children:null===e||void 0===e?void 0:e.card_desc}),Object(f.jsxs)("div",{className:"card_cand",children:[Object(f.jsx)("div",{className:"card_cand_hd",children:Object(f.jsxs)("div",{className:"amountToCommit",children:[Object(f.jsx)("p",{children:"Amount of Choice to commit:"}),Object(f.jsx)("input",{type:"number",min:"1",placeholder:"1",className:"amtToCommitInp"})]})}),Object(f.jsxs)("div",{className:"vote_collap",children:[Object(f.jsx)("div",{className:"card_cand_hd",children:"Options"}),Object(f.jsx)("ul",{className:"vote_now_list",children:null===e||void 0===e||null===(n=e.candidates)||void 0===n?void 0:n.map((function(e,t){return Object(f.jsxs)("li",{children:[Object(f.jsx)("input",{type:"radio",name:"options",value:e.address}),Object(f.jsx)("div",{className:"vote_img_cont",children:e.image?Object(f.jsx)("img",{src:e.image,alt:""}):Object(f.jsx)("i",{className:"uil uil-asterisk"})}),Object(f.jsx)("p",{children:e.name})]},t)}))}),Object(f.jsx)("div",{className:"rec_vote_cont",children:Object(f.jsx)("button",{className:"record_vote",onClick:function(t){var n,a,s,o=r()(t.target).closest(".card_cand").find(".vote_now_list"),i=r()(t.target).closest(".card_cand").find(".amtToCommitInp").val(),l=i||e.choice_per_vote;n=r()("input[name=options]:checked",o).val(),a=l,s=e,n?"my-algo"===c?b({address:n,amount:a,election:s}):"algosigner"===c?x({address:n,amount:a,election:s}):"walletconnect"===c&&v({address:n,amount:a,election:s}):alert("Select an option to vote!!")},children:"Submit vote"})})]})]})]},t)}))})]})})}}).call(this,n(67).Buffer)},249:function(e,t,n){},265:function(e,t){},267:function(e,t){},277:function(e,t){},279:function(e,t){},306:function(e,t){},307:function(e,t){},312:function(e,t){},314:function(e,t){},321:function(e,t){},340:function(e,t){},382:function(e,t){},439:function(e,t,n){"use strict";n.r(t);var a=n(14),s=n(28),o=n(243),c=n(240),r=n(3),i=n(36),l=n(70),d=n.n(l),u=n(73),m=n(100),p=n.n(m),j=n(209),g=n(0),b=n(138),h=n.n(b),f=n(418),x=n(8),v=new p.a.Indexer({"X-API-Key":"fi0QdbiBVl8hsVMCA2SUg6jnQdvAzxY48Zy2G6Yc"},"https://testnet-algorand.api.purestake.io/idx2",""),O=function(){var e=Object(s.c)((function(e){return e.status.addressNum})),t=localStorage.getItem("address"),n=t||localStorage.getItem("addresses").split(",")[e],o=[{address:"DQ2NPLGQ3CV3QAPMS7KHIRUNUF2ZSTYRT5SZGDCPLB7VPC5OSSLCI5H7DM",image:"",name:"Yes"},{address:"6P6D5KQH5VIXEJGW6LXPUMEZ77XNLHQXB6GMW4CBDBN2VJ4CFZ7HCIKUBM",image:"",name:"No"}],c=o[0].address,r=o[1].address,i=0,l=Object(g.useState)(0),m=Object(a.a)(l,2),p=m[0],j=m[1],b=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.searchForTransactions().address(n).assetID(21364625).limit().do();case 3:t=e.sent,t.transactions.forEach((function(e){var t=e["asset-transfer-transaction"];t.receiver!==c&&t.receiver!==r||(i+=t.amount/100)})),j(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(g.useEffect)((function(){b()}),[n]),Object(x.jsx)(x.Fragment,{children:p})},w=n(111),_=n(146),N=n.n(_),S=function(e){var t,n,o,r,i=e.darkTheme,l=Object(s.b)(),m=Object(s.c)((function(e){return e.status.addressNum})),b=null!==localStorage.getItem("wallet-type"),v=Object(c.a)(),_=Object(a.a)(v,1)[0],S=Object(g.useState)([]),C=Object(a.a)(S,2),y=C[0],I=C[1],k=new p.a.Algodv2({"X-API-Key":"Xy8NsXxfJg2cQ2YQ4pax6aLrTcj55jZ9mbsNCM30 "},"https://testnet-algorand.api.purestake.io/ps2",""),A=localStorage.getItem("address"),T=null===(t=localStorage.getItem("addresses"))||void 0===t?void 0:t.split(","),D=[];Object(g.useEffect)((function(){null===T||void 0===T||T.forEach(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.accountInformation(t).do();case 2:a=e.sent,s=(null===(n=a.assets.find((function(e){return e["asset-id"]===j.a})))||void 0===n?void 0:n.amount)/100,D.push({balance:s||0,address:t}),(null===D||void 0===D?void 0:D.length)===(null===T||void 0===T?void 0:T.length)&&(console.log(D),l({type:"setAlgoAddress",addressIndex:0,addr:null===(o=D[0])||void 0===o?void 0:o.address}),I(D));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var P=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a,e.prev=1,e.next=4,t.connect({shouldSelectOneAccount:!0});case 4:n=e.sent,a=n.map((function(e){return null===e||void 0===e?void 0:e.address})),s=n[0].address,localStorage.setItem("wallet-type","my-algo"),localStorage.setItem("address",s),localStorage.setItem("addresses",a),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"!==typeof window.AlgoSigner){e.next=5;break}window.open("https://chrome.google.com/webstore/detail/algosigner/kmmolakhbgdlpkjkcjkebenjheonagdm","_blank"),e.next=16;break;case 5:return e.next=7,window.AlgoSigner.connect({ledger:"TestNet"});case 7:return e.next=9,window.AlgoSigner.accounts({ledger:"TestNet"});case 9:t=e.sent,n=t.map((function(e){return null===e||void 0===e?void 0:e.address})),a=t[0].address,localStorage.setItem("wallet-type","algosigner"),localStorage.setItem("address",a),localStorage.setItem("addresses",n),window.location.reload();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),alert("AlgoSigner not set up yet!");case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("header",{className:"small_header",children:[Object(x.jsxs)("div",{className:"small_header_inn",children:[Object(x.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textTransform:"uppercase"},children:Object(x.jsx)("strong",{children:"Choice Coin"})}),Object(x.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:b?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"addrDisplay",children:[Object(x.jsx)("div",{className:"addrDispMain",children:Object(x.jsxs)("div",{className:"addrDisplayInn",children:[Object(x.jsxs)("div",{className:"addrBalance",children:[null===(n=y[m])||void 0===n?void 0:n.balance," Choice"]}),Object(x.jsx)(f.CopyToClipboard,{text:null===(o=y[m])||void 0===o?void 0:o.address,children:Object(x.jsxs)("div",{className:"addressTxt",children:[Object(x.jsx)("p",{children:null===(r=y[m])||void 0===r?void 0:r.address}),Object(x.jsx)("i",{className:"uil uil-copy"})]})})]})}),Object(x.jsx)("div",{className:"dropDownConnect_items",children:null===y||void 0===y?void 0:y.map((function(e,t){return Object(x.jsx)("div",{className:"dropDownConnect_item",onClick:function(){l({type:"setAlgoAddress",addressIndex:t,addr:e.address})},children:Object(x.jsx)("p",{className:"dropDownConnect_item_txt",children:e.address})},t)}))})]})}):Object(x.jsxs)("div",{className:"dropDownConnect",children:[Object(x.jsx)("div",{className:"dropDownConnect_button",children:Object(x.jsx)("button",{className:"connect_wallet_button",children:Object(x.jsxs)("p",{children:["Connect Wallet",Object(x.jsx)("i",{className:"uil uil-angle-down",style:{fontSize:"18px"}})]})})}),Object(x.jsxs)("div",{className:"dropDownConnect_items",children:[Object(x.jsxs)("div",{className:"dropDownConnect_item",onClick:P,children:[Object(x.jsx)("div",{className:"dropDownConnect_img",children:Object(x.jsx)("img",{src:"https://i.postimg.cc/76r9kXSr/My-Algo-Logo-4c21daa4.png",alt:""})}),Object(x.jsx)("p",{className:"dropDownConnect_item_txt",children:"Algo-Wallet"})]}),Object(x.jsxs)("div",{className:"dropDownConnect_item",onClick:M,children:[Object(x.jsx)("div",{className:"dropDownConnect_img",children:Object(x.jsx)("img",{src:"https://i.postimg.cc/L4JB4JwT/Algo-Signer-2ec35000.png",alt:""})}),Object(x.jsx)("p",{className:"dropDownConnect_item_txt",children:void 0===typeof window.AlgoSigner?"Install AlgoSigner":"AlgoSigner"})]}),Object(x.jsxs)("div",{className:"dropDownConnect_item",onClick:function(){var e=new w.default({bridge:"https://bridge.walletconnect.org",qrcodeModal:N.a});e.connected||e.createSession(),e.on("connect",(function(e,t){if(e)throw e;var n=t.params[0].accounts,a=n.map((function(e){return e})),s=n[0];localStorage.setItem("wallet-type","walletconnect"),localStorage.setItem("address",s),localStorage.setItem("addresses",a),window.location.reload()})),e.on("session_update",(function(e,t){if(e)throw e;var n=t.params[0].accounts,a=n.map((function(e){return e})),s=n[0];localStorage.setItem("wallet-type","walletconnect"),localStorage.setItem("address",s),localStorage.setItem("addresses",a),window.location.reload()})),e.on("disconnect",(function(e,t){e&&console.log(e)}))},children:[Object(x.jsx)("div",{className:"dropDownConnect_img",children:Object(x.jsx)("img",{src:"https://i.postimg.cc/J7JZ4cFb/icon-37675b59-1.png",alt:""})}),Object(x.jsx)("p",{className:"dropDownConnect_item_txt",children:"Algorand Wallet(MOBILE)"})]})]})]})})]}),Object(x.jsxs)("div",{style:{width:"100%",display:"flex",fontSize:"13px",fontWeight:"500",wordSpacing:"1px",alignItems:"center",color:A?"#fff":"var(--wht)",padding:"0px 5vw",letterSpacing:"0.5px",textTransform:"uppercase",background:A?"var(--main-col)":"var(--background)",height:"var(--sm-hd-height-half)",justifyContent:"space-between",borderTop:"1px solid var(--border-default)"},children:[Object(x.jsxs)("p",{style:{opacity:"0.9"},children:["Amount of Choice Coin used for voting:\xa0",!!A&&Object(x.jsx)(O,{})," $Choice"]}),_>850&&Object(x.jsxs)("ul",{className:"listNavBig",children:[Object(x.jsxs)("li",{onClick:function(){i?(localStorage.setItem("mode","light"),l({type:"light_mode"})):(localStorage.setItem("mode","dark"),l({type:"dark_mode"}))},children:["LIGHT/DARK",i?Object(x.jsx)("i",{className:"uil uil-brightness-low"}):Object(x.jsx)("i",{className:"uil uil-moon"})]}),Object(x.jsx)("li",{onClick:function(){localStorage.removeItem("address"),localStorage.removeItem("addresses"),localStorage.removeItem("wallet-type"),localStorage.removeItem("walletconnect"),window.location.reload(),console.log("data")},children:"Sign Out"})]})]})]})},C=function(e){e.NavLink;var t=e.darkTheme,n=Object(s.b)();return Object(x.jsx)("footer",{className:"ft_sm",children:Object(x.jsxs)("ul",{className:"ft_sm_inn",children:[Object(x.jsx)("li",{className:"ft_sm_li",onClick:function(){t?(localStorage.setItem("mode","light"),n({type:"light_mode"})):(localStorage.setItem("mode","dark"),n({type:"dark_mode"}))},children:Object(x.jsx)("div",{style:{display:"flex",fontSize:"13px",opacity:"0.65",cursor:"pointer",alignItems:"center",flexDirection:"column"},children:t?Object(x.jsx)("i",{className:"uil uil-brightness-low",style:{fontSize:"21px"}}):Object(x.jsx)("i",{className:"uil uil-moon",style:{fontSize:"21px"}})})}),Object(x.jsx)("li",{className:"ft_sm_li",children:Object(x.jsx)("div",{style:{display:"flex",fontSize:"13px",opacity:"0.65",cursor:"pointer",alignItems:"center",flexDirection:"column"},onClick:function(){localStorage.removeItem("address"),localStorage.removeItem("addresses"),localStorage.removeItem("wallet-type"),localStorage.removeItem("walletconnect"),window.location.reload()},children:Object(x.jsx)("i",{className:"uil uil-signout",style:{fontSize:"21px"}})})})]})})};n(420),n(210),t.default=function(){var e=Object(c.a)(),t=Object(a.a)(e,1)[0],n=Object(s.c)((function(e){return e.status.darkTheme}));return Object(x.jsxs)("main",{className:"".concat(n?"dark_theme big_screen":"light_theme big_screen"),id:"main_main",children:[Object(x.jsx)(S,{darkTheme:n}),Object(x.jsxs)(r.c,{children:[Object(x.jsx)(r.a,{path:"/",element:Object(x.jsx)(o.a,{})}),Object(x.jsx)(r.a,{path:"/home",element:Object(x.jsx)(o.a,{})})]}),t<=850&&Object(x.jsx)(C,{NavLink:i.b,darkTheme:n})]})}}}]);