{"ast":null,"code":"var _classCallCheck = require(\"C:/Users/EUGENE/ChoiceDev/Choice-Coin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/EUGENE/ChoiceDev/Choice-Coin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Messenger = require(\"@randlabs/communication-bridge\");\n\nvar WALLET_BRIDGE_CHANNEL_NAME = \"wallet-bridge-communication-channel\";\n\nvar Messaging = /*#__PURE__*/function () {\n  \"use strict\";\n\n  /**\n   * @description Request object\n   * @typedef {Object} Request\n   * @property {string} method Request method\n   * @property {Object} [params] Optionally, request params\n   */\n\n  /**\n   * @description Response object\n   * @typedef {Object} Response\n   * @property {\"error\"|\"success\"} status Response status\n   * @property {string} message Response message\n   * @property {Object} [data] Optionally, is the request was a success and sent data\n   */\n\n  /**\n   * @description Callback function to manage message received from the channel\n      * @callback onMessagingCallback\n      * @param {Request} request Request received from another window\n      * @param {sendResponse} cb Response callback\n   * @returns {void}\n      */\n\n  /**\n      * @constructor Messaging constructor\n      * @param {onMessagingCallback} [listenerCallback]\n      * @description Create an abstraction of Messenger class\n      */\n  function Messaging(listenerCallback) {\n    _classCallCheck(this, Messaging);\n\n    var that = this;\n    /**\n     * @access public\n     * @description Send message options\n     * @type {import(\"bridge-communication\").sendMessageOptions}\n     */\n\n    this.options = {\n      waitForReply: true,\n      timeout: 250\n    };\n    /**\n     * @access private\n     */\n\n    this.listenerCallback = listenerCallback;\n    /**\n     * @access private\n     * @type {Messenger}\n     */\n\n    this.bridge = new Messenger(WALLET_BRIDGE_CHANNEL_NAME, function (req, source, cb, bridge) {\n      if (that.listenerCallback) that.listenerCallback(req, cb);\n    });\n  }\n  /**\n   * @access public\n      * @description Send message to a target window\n      * @param {Window} window Target window\n      * @param {Request} request Request\n      * @param {string} origin Target origin\n   * @param {import(\"bridge-communication\").sendMessageOptions} [options] Override default message options\n   * @returns {Promise<Response>} Response of the target window\n      */\n\n\n  _createClass(Messaging, [{\n    key: \"sendMessage\",\n    value: function sendMessage(window, request, origin, options) {\n      return this.bridge.sendMessage(window, request, origin, options ? options : this.options);\n    }\n    /**\n     * @access public\n     * @description Set new listener\n     * @param {onMessagingCallback} [listenerCallback] Set a new listener or override actual listener\n     * @returns {void}\n     */\n\n  }, {\n    key: \"setNewListener\",\n    value: function setNewListener(listenerCallback) {\n      this.listenerCallback = listenerCallback;\n    }\n    /**\n     * @access public\n     * @description Close bridge\n     * @returns {void}\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.bridge.close();\n    }\n  }]);\n\n  return Messaging;\n}();\n\nmodule.exports = Messaging;","map":{"version":3,"sources":["C:/Users/EUGENE/ChoiceDev/Choice-Coin/node_modules/@randlabs/myalgo-connect/lib/messaging/Messaging.js"],"names":["Messenger","require","WALLET_BRIDGE_CHANNEL_NAME","Messaging","listenerCallback","that","options","waitForReply","timeout","bridge","req","source","cb","window","request","origin","sendMessage","close","module","exports"],"mappings":";;;;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,gCAAD,CAAzB;;AAEA,IAAMC,0BAA0B,GAAG,qCAAnC;;IAEMC,S;;;AAEL;AACD;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AACA;AACA;;AAGC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;AAEC,qBAAYC,gBAAZ,EAA8B;AAAA;;AAC7B,QAAMC,IAAI,GAAG,IAAb;AAEA;AACF;AACA;AACA;AACA;;AACE,SAAKC,OAAL,GAAe;AAAEC,MAAAA,YAAY,EAAE,IAAhB;AAAsBC,MAAAA,OAAO,EAAE;AAA/B,KAAf;AAEA;AACF;AACA;;AACE,SAAKJ,gBAAL,GAAwBA,gBAAxB;AAEA;AACF;AACA;AACA;;AACE,SAAKK,MAAL,GAAc,IAAIT,SAAJ,CAAcE,0BAAd,EAA0C,UAASQ,GAAT,EAAcC,MAAd,EAAsBC,EAAtB,EAA0BH,MAA1B,EAAkC;AACzF,UAAIJ,IAAI,CAACD,gBAAT,EACCC,IAAI,CAACD,gBAAL,CAAsBM,GAAtB,EAA2BE,EAA3B;AACD,KAHa,CAAd;AAIA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;WAEC,qBAAYC,MAAZ,EAAoBC,OAApB,EAA6BC,MAA7B,EAAqCT,OAArC,EAA8C;AAC7C,aAAO,KAAKG,MAAL,CAAYO,WAAZ,CAAwBH,MAAxB,EAAgCC,OAAhC,EAAyCC,MAAzC,EAAiDT,OAAO,GAAGA,OAAH,GAAa,KAAKA,OAA1E,CAAP;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;;WACC,wBAAeF,gBAAf,EAAiC;AAChC,WAAKA,gBAAL,GAAwBA,gBAAxB;AACA;AAED;AACD;AACA;AACA;AACA;;;;WACC,iBAAQ;AACP,WAAKK,MAAL,CAAYQ,KAAZ;AACA;;;;;;AAGFC,MAAM,CAACC,OAAP,GAAiBhB,SAAjB","sourcesContent":["const Messenger = require(\"@randlabs/communication-bridge\");\n\nconst WALLET_BRIDGE_CHANNEL_NAME = \"wallet-bridge-communication-channel\";\n\nclass Messaging {\n\n\t/**\n\t * @description Request object\n\t * @typedef {Object} Request\n\t * @property {string} method Request method\n\t * @property {Object} [params] Optionally, request params\n\t */\n\n\t/**\n\t * @description Response object\n\t * @typedef {Object} Response\n\t * @property {\"error\"|\"success\"} status Response status\n\t * @property {string} message Response message\n\t * @property {Object} [data] Optionally, is the request was a success and sent data\n\t */\n\n\n\t/**\n\t * @description Callback function to manage message received from the channel\n     * @callback onMessagingCallback\n     * @param {Request} request Request received from another window\n     * @param {sendResponse} cb Response callback\n\t * @returns {void}\n     */\n\n\t/**\n     * @constructor Messaging constructor\n     * @param {onMessagingCallback} [listenerCallback]\n     * @description Create an abstraction of Messenger class\n     */\n\n\tconstructor(listenerCallback) {\n\t\tconst that = this;\n\n\t\t/**\n\t\t * @access public\n\t\t * @description Send message options\n\t\t * @type {import(\"bridge-communication\").sendMessageOptions}\n\t\t */\n\t\tthis.options = { waitForReply: true, timeout: 250 };\n\n\t\t/**\n\t\t * @access private\n\t\t */\n\t\tthis.listenerCallback = listenerCallback;\n\n\t\t/**\n\t\t * @access private\n\t\t * @type {Messenger}\n\t\t */\n\t\tthis.bridge = new Messenger(WALLET_BRIDGE_CHANNEL_NAME, function(req, source, cb, bridge) {\n\t\t\tif (that.listenerCallback)\n\t\t\t\tthat.listenerCallback(req, cb);\n\t\t});\n\t}\n\n\t/**\n\t * @access public\n     * @description Send message to a target window\n     * @param {Window} window Target window\n     * @param {Request} request Request\n     * @param {string} origin Target origin\n\t * @param {import(\"bridge-communication\").sendMessageOptions} [options] Override default message options\n\t * @returns {Promise<Response>} Response of the target window\n     */\n\n\tsendMessage(window, request, origin, options) {\n\t\treturn this.bridge.sendMessage(window, request, origin, options ? options : this.options);\n\t}\n\n\t/**\n\t * @access public\n\t * @description Set new listener\n\t * @param {onMessagingCallback} [listenerCallback] Set a new listener or override actual listener\n\t * @returns {void}\n\t */\n\tsetNewListener(listenerCallback) {\n\t\tthis.listenerCallback = listenerCallback;\n\t}\n\n\t/**\n\t * @access public\n\t * @description Close bridge\n\t * @returns {void}\n\t */\n\tclose() {\n\t\tthis.bridge.close();\n\t}\n}\n\nmodule.exports = Messaging;\n"]},"metadata":{},"sourceType":"script"}